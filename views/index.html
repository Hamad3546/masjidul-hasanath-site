<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Masjidul Hasanath Super-App</title>
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#1b5e20">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --primary: #1b5e20; --gold: #c5a021; --light: #f4f7f2; }
        body { font-family: 'Segoe UI', sans-serif; margin: 0; padding-bottom: 80px; background: #fff; transition: 0.3s; }
        header { background: var(--primary); color: white; padding: 15px; text-align: center; border-radius: 0 0 20px 20px; }
        
        .lang-bar { background: #f0f0f0; padding: 10px; overflow-x: auto; white-space: nowrap; display: flex; gap: 8px; border-bottom: 1px solid #ddd; }
        .lang-btn { background: white; border: 1px solid #ccc; padding: 6px 12px; border-radius: 20px; font-size: 0.75rem; cursor: pointer; transition: 0.2s; }
        .lang-btn.active { background: var(--gold); color: white; border-color: var(--gold); }

        .content-section { display: none; padding: 20px; animation: fadeIn 0.4s; }
        .active-section { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .card { background: var(--light); padding: 20px; border-radius: 15px; margin-bottom: 15px; border-left: 5px solid var(--gold); box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
        .btn { background: var(--primary); color: white; border: none; padding: 12px; border-radius: 10px; width: 100%; font-weight: bold; cursor: pointer; margin-top: 10px; }
        .arabic { font-size: 1.8rem; text-align: right; display: block; margin: 10px 0; font-family: 'Traditional Arabic', serif; }

        .bottom-nav { position: fixed; bottom: 0; width: 100%; background: white; display: flex; justify-content: space-around; padding: 12px 0; border-top: 1px solid #eee; box-shadow: 0 -3px 15px rgba(0,0,0,0.1); z-index: 9999; }
        .nav-item { text-align: center; color: #777; font-size: 0.7rem; cursor: pointer; flex: 1; transition: 0.3s; }
        .nav-item i { font-size: 1.3rem; margin-bottom: 4px; display: block; }
        .nav-item.active { color: var(--primary); font-weight: bold; }
    </style>
</head>
<body>

<header>
    <div style="font-weight: bold; font-size: 1.2rem;" id="site-title">MASJIDUL HASANATH</div>
    <div id="hijri-date" style="color: var(--gold); font-size: 0.8rem;"></div>
</header>

<div class="lang-bar">
    <button class="lang-btn active" onclick="setLang('en', this)">English</button>
    <button class="lang-btn" onclick="setLang('si', this)">සිංහල</button>
    <button class="lang-btn" onclick="setLang('ta', this)">தமிழ்</button>
    <button class="lang-btn" onclick="setLang('ar', this)">العربية</button>
    <button class="lang-btn" onclick="setLang('ur', this)">اردو</button>
</div>

<section id="dua-sec" class="content-section active-section">
    <h3 id="dua-heading">Daily Duas</h3>
    <div id="dua-container">Loading...</div>
    <button class="btn" id="load-more-btn" onclick="renderDuas()">Show More</button>
</section>

<section id="about-sec" class="content-section">
    <div class="card" style="text-align: center;">
        <i class="fas fa-user-circle" style="font-size: 4rem; color: var(--gold);"></i>
        <h2 id="about-name">Developed by Hamad</h2>
        <p id="about-bio">Assalamu Alaikum! I am Hamad. I built this platform for Masjidul Hasanath with deep passion and talent. This is a result of hours of hard work to serve the Ummah.</p>
        <p><strong id="location">Godamuduna, Sri Lanka</strong></p>
    </div>
</section>

<div class="bottom-nav">
    <div class="nav-item active" onclick="tab('dua-sec', this)" id="nav-dua"><i class="fas fa-hands-praying"></i>Duas</div>
    <div class="nav-item" onclick="tab('about-sec', this)" id="nav-about"><i class="fas fa-user-tie"></i>Hamad</div>
</div>

<script>
    let allDuas = [];
    let currentIndex = 0;
    let currentLang = 'en';

    // TRANSLATIONS DICTIONARY
    const uiTexts = {
        en: { title: "MASJIDUL HASANATH", duaHead: "Daily Duas", load: "Show More", navDua: "Duas", navAbout: "Hamad", aboutHead: "Developed by Hamad", aboutBio: "Assalamu Alaikum! I am Hamad. I built this platform for Masjidul Hasanath with deep passion and talent. This is a result of hours of hard work to serve the Ummah.", loc: "Godamuduna, Sri Lanka" },
        si: { title: "මස්ජිදුල් හසනාත්", duaHead: "දිනපතා දුආ", load: "තව පෙන්වන්න", navDua: "දුආ", navAbout: "හමඩ්", aboutHead: "හමඩ් විසින් නිර්මාණය කරන ලදී", aboutBio: "අස්සලාමු අලයිකුම්! මම හමඩ්. මම මෙම පද්ධතිය මස්ජිදුල් හසනාත් වෙනුවෙන් දැඩි උනන්දුවකින් නිර්මාණය කළෙමි. මෙය මුස්ලිම් ප්‍රජාවට සේවය කිරීම සඳහා කළ කැපවීමකි.", loc: "ගොඩමුදුන, ශ්‍රී ලංකාව" },
        ta: { title: "மஸ்ஜிதுல் ஹஸனாத்", duaHead: "தினசரி துஆக்கள்", load: "மேலும் காட்டவும்", navDua: "துஆக்கள்", navAbout: "ஹமத்", aboutHead: "ஹமத் தயாரித்தார்", aboutBio: "அஸ்ஸலாமு அலைக்கும்! நான் ஹமத். மஸ்ஜிதுல் ஹஸனாத் சமூகத்திற்காக நான் இந்த தளத்தை உருவாக்கினேன். இது ஒரு சிறந்த சேவையாகும்.", loc: "கொடமுதுன, இலங்கை" },
        ar: { title: "مسجد الحسنات", duaHead: "الأدعية اليومية", load: "عرض المزيد", navDua: "أدعية", navAbout: "حمد", aboutHead: "تم التطوير بواسطة حمد", aboutBio: "السلام عليكم! أنا حمد. لقد بنيت هذه المنصة لمسجد الحسنات بشغف كبير وموهبة. هذا نتيجة عمل شاق لخدمة الأمة.", loc: "جودامودونا، سريلانக்கா" },
        ur: { title: "مسجد الحسنات", duaHead: "روزانہ کی دعائیں", load: "مزید دکھائیں", navDua: "دعائیں", navAbout: "حمد", aboutHead: "حمد نے تیار کیا", aboutBio: "السلام علیکم! میں حمد ہوں۔ میں نے یہ پلیٹ فارم مسجد الحسنات کے لیے بڑی محنت اور لگن سے بنایا ہے۔", loc: "گوڈاموڈونا، سری لنکا" }
    };

    async function loadData() {
        try {
            const res = await fetch('duas.json');
            allDuas = await res.json();
            updateUI();
        } catch (e) {
            document.getElementById('dua-container').innerHTML = 'Please upload duas.json to GitHub.';
        }
    }

    function updateUI() {
        const t = uiTexts[currentLang] || uiTexts.en;
        document.getElementById('site-title').innerText = t.title;
        document.getElementById('dua-heading').innerText = t.duaHead;
        document.getElementById('load-more-btn').innerText = t.load;
        document.getElementById('nav-dua').innerHTML = `<i class="fas fa-hands-praying"></i>${t.navDua}`;
        document.getElementById('nav-about').innerHTML = `<i class="fas fa-user-tie"></i>${t.navAbout}`;
        document.getElementById('about-name').innerText = t.aboutHead;
        document.getElementById('about-bio').innerText = t.aboutBio;
        document.getElementById('location').innerText = t.loc;
        
        document.getElementById('dua-container').innerHTML = '';
        currentIndex = 0;
        renderDuas();
    }

    function renderDuas() {
        const container = document.getElementById('dua-container');
        const batch = allDuas.slice(currentIndex, currentIndex + 10);
        batch.forEach(d => {
            const card = document.createElement('div');
            card.className = 'card';
            card.innerHTML = `<span class="arabic">${d.ar}</span><p>${d[currentLang] || d.en}</p>`;
            container.appendChild(card);
        });
        currentIndex += 10;
        document.getElementById('load-more-btn').style.display = currentIndex >= allDuas.length ? 'none' : 'block';
    }

    function setLang(lang, btn) {
        currentLang = lang;
        document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        updateUI();
    }

    function tab(id, el) {
        document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active-section'));
        document.getElementById(id).classList.add('active-section');
        document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
        el.classList.add('active');
    }

    loadData();
    const hijri = new Intl.DateTimeFormat('en-u-ca-islamic-uma', {day:'numeric', month:'long', year:'numeric'}).format(new Date());
    document.getElementById('hijri-date').innerText = hijri;
</script>
</body>
</html>
