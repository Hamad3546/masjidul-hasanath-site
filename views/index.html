<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Masjidul Hasanath | Official App</title>

    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        :root { --primary: #1b5e20; --secondary: #f4f7f2; --gold: #c5a021; --white: #ffffff; }
        body { font-family: 'Segoe UI', sans-serif; margin: 0; background: #fafafa; color: #333; }
        
        /* LOGIN OVERLAY */
        #auth-overlay { position: fixed; inset: 0; background: var(--primary); z-index: 10000; display: flex; flex-direction: column; align-items: center; justify-content: center; color: white; text-align: center; }
        .auth-card { background: white; padding: 30px; border-radius: 25px; width: 85%; max-width: 350px; color: #333; box-shadow: 0 10px 30px rgba(0,0,0,0.3); }

        header { background: var(--primary); padding: 20px; text-align: center; color: white; border-bottom: 5px solid var(--gold); }
        nav { background: var(--white); display: flex; justify-content: space-around; padding: 15px; position: sticky; top: 0; z-index: 100; box-shadow: 0 2px 10px rgba(0,0,0,0.1); flex-wrap: wrap; }
        nav button { background: none; border: none; color: var(--primary); font-size: 1.2rem; cursor: pointer; padding: 5px; transition: 0.3s; }
        nav button.active { color: var(--gold); transform: scale(1.1); }

        section { padding: 30px 6%; display: none; animation: fadeIn 0.4s ease; }
        section.active { display: block; }
        .card { background: var(--white); border-radius: 20px; padding: 20px; margin-bottom: 20px; border: 1px solid #eee; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }

        /* MOOD DUA */
        .arabic-text { font-size: 2.2rem; font-weight: bold; color: #000; text-align: center; display: block; line-height: 1.6; }

        /* SALAH GUIDE STYLES */
        .salah-step { border-left: 4px solid var(--gold); padding-left: 15px; margin-bottom: 25px; }
        .salah-arabic { font-size: 1.6rem; color: var(--primary); font-weight: bold; display: block; margin: 10px 0; text-align: right; }
        .transliteration { font-style: italic; color: #666; font-size: 0.9rem; display: block; margin-bottom: 5px; }

        /* CHATBOT */
        #chat-msgs { height: 300px; overflow-y: auto; background: #e5ddd5; padding: 15px; border-radius: 15px; display: flex; flex-direction: column; }
        .msg { margin-bottom: 10px; padding: 10px; border-radius: 12px; max-width: 80%; }
        .msg.bot { background: white; align-self: flex-start; }
        .msg.user { background: #dcf8c6; align-self: flex-end; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

<div id="auth-overlay">
    <div class="auth-card">
        <i class="fas fa-mosque fa-3x" style="color: var(--primary); margin-bottom: 10px;"></i>
        <h2>Masjidul Hasanath</h2>
        <div id="g_id_onload" data-client_id="318225024149-0hjour8gpcp0in6l9ksb415ba6aqvn03.apps.googleusercontent.com" data-callback="handleCredentialResponse"></div>
        <div class="g_id_signin" data-type="standard"></div>
        <button onclick="bypassLogin()" style="margin-top:15px; background:none; border:none; color:var(--primary); text-decoration:underline; cursor:pointer;">Guest Mode</button>
    </div>
</div>

<header><h1>Masjidul Hasanath</h1><p id="hijri-date"></p></header>

<nav>
    <button onclick="showSec('home', this)" class="active"><i class="fas fa-home"></i></button>
    <button onclick="showSec('wellness', this)"><i class="fas fa-heart"></i></button>
    <button onclick="showSec('salah', this)"><i class="fas fa-pray"></i></button>
    <button onclick="showSec('news', this)"><i class="fas fa-newspaper"></i></button>
    <button onclick="showSec('ramadan', this)"><i class="fas fa-calendar-alt"></i></button>
    <button onclick="showSec('chatbot', this)"><i class="fas fa-robot"></i></button>
    <button onclick="showSec('tasbih', this)"><i class="fas fa-fingerprint"></i></button>
</nav>

<section id="home" class="active">
    <div class="card"><h3>Prayer Times</h3><div id="times-list"></div></div>
</section>

<section id="salah">
    <h2>How to Pray Properly</h2>
    <div class="card">
        <div class="salah-step">
            <strong>1. Niyyah & Takbir</strong>
            <span class="salah-arabic">اللهُ أَكْبَر</span>
            <span class="transliteration">Allahu Akbar</span>
            <small>Allah is the Greatest.</small>
        </div>
        <div class="salah-step">
            <strong>2. Sana (Opening Dua)</strong>
            <span class="salah-arabic">سُبْحَانَكَ اللَّهُمَّ وَبِحَمْدِكَ، وَتَبَارَكَ اسْمُكَ، وَتَعَالَى جَدُّكَ، وَلَا إِلَهَ غَيْرُكَ</span>
            <span class="transliteration">Subhanaka Allahumma wa bihamdika...</span>
            <small>Glory be to You, O Allah, and all praises are due to You...</small>
        </div>
        <div class="salah-step">
            <strong>3. Ruku (Bowing)</strong>
            <span class="salah-arabic">سُبْحَانَ رَبِّيَ الْعَظِيم</span>
            <span class="transliteration">Subhana Rabbiyal Azeem (3 times)</span>
            <small>Glory be to my Lord, the Magnificent.</small>
        </div>
        <div class="salah-step">
            <strong>4. Sujud (Prostration)</strong>
            <span class="salah-arabic">سُبْحَانَ رَبِّيَ الْأَعْلَى</span>
            <span class="transliteration">Subhana Rabbiyal A'la (3 times)</span>
            <small>Glory be to my Lord, the Most High.</small>
        </div>
        <div class="salah-step">
            <strong>5. Tashahhud</strong>
            <span class="salah-arabic">التَّحِيَّاتُ لِلَّهِ وَالصَّلَوَاتُ وَالطَّيِّبَاتُ...</span>
            <span class="transliteration">At-tahiyyatu lillahi was-salawatu...</span>
            <small>All greetings, prayers and goodness are for Allah...</small>
        </div>
    </div>
</section>

<section id="wellness">
    <h2>Dua for your Mood</h2>
    <div class="card">
        <input type="range" min="1" max="5" value="3" class="mood-slider" style="width:100%" oninput="updateMood(this.value)">
        <h3 id="mood-label" style="text-align:center">Peaceful</h3>
        <div class="card" style="background:#fffde7">
            <span class="arabic-text" id="dua-arabic">وَهُوَ مَعَكُمْ أَيْنَ مَا كُنتُمْ</span>
            <p id="dua-english" style="text-align:center">"And He is with you wherever you are." (57:4)</p>
        </div>
    </div>
</section>

<section id="chatbot">
    <h2>Ilm AI</h2>
    <div class="card">
        <div id="chat-msgs"></div>
        <div style="display:flex; margin-top:10px;">
            <input type="text" id="chat-input" style="flex:1; border-radius:20px; padding:10px; border:1px solid #ddd;" placeholder="Ask Hamad's AI...">
            <button onclick="sendChat()" style="background:var(--primary); color:white; border:none; padding:10px 20px; border-radius:20px; margin-left:5px;">Send</button>
        </div>
    </div>
</section>

<section id="news">
    <h2>Godamuduna News</h2>
    <div id="news-box" class="card" style="display:none;">
        <textarea id="news-input" style="width:100%; border-radius:10px; padding:10px;" placeholder="Post news..."></textarea>
        <button onclick="postNews()" style="width:100%; background:var(--primary); color:white; border:none; padding:10px; margin-top:10px; border-radius:10px;">Post</button>
    </div>
    <div id="news-feed"></div>
</section>

<section id="ramadan">
    <h2>Ramadan 2026</h2>
    <div id="ramadan-table" class="card"></div>
</section>

<section id="tasbih">
    <h2>Tasbih</h2>
    <div class="card" style="text-align:center">
        <div id="count" style="font-size:5rem; font-weight:bold; color:var(--primary)">0</div>
        <button onclick="addCount()" style="width:150px; height:150px; border-radius:50%; background:var(--primary); color:white; font-size:2rem; border:none;">TAP</button>
    </div>
</section>

<footer style="text-align:center; padding:40px; background:var(--secondary);">
    <p><strong>Developed by the Hard Work of HAMAD</strong></p>
</footer>

<script>
    const moods = {
        1: { l: "Anxious", a: "إِنَّ مَعَ الْعُسْرِ يُسْرًا", e: "Verily, with hardship comes ease. (94:6)" },
        2: { l: "Stressed", a: "لَا تُكَلِّفُ نَفْسًا إِلَّا وُسْعَهَا", e: "Allah does not burden a soul beyond its capacity. (2:286)" },
        3: { l: "Neutral", a: "وَهُوَ مَعَكُمْ أَيْنَ مَا كُنتُمْ", e: "And He is with you wherever you are. (57:4)" },
        4: { l: "Grateful", a: "لَئِن شَكَرْتُمْ لَأَزِيدَنَّكُمْ", e: "If you are grateful, I will surely increase you. (14:7)" },
        5: { l: "Joyful", a: "الْحَمْدُ لِلَّهِ رَبِّ الْعَالَمِينَ", e: "All praise is due to Allah, Lord of all worlds." }
    };

    function handleCredentialResponse(r) { document.getElementById('auth-overlay').style.display='none'; initApp(); }
    function bypassLogin() { document.getElementById('auth-overlay').style.display='none'; initApp(); }
    function showSec(id, btn) {
        document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
        document.querySelectorAll('nav button').forEach(b => b.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        btn.classList.add('active');
    }
    function updateMood(v) {
        document.getElementById('mood-label').innerText = moods[v].l;
        document.getElementById('dua-arabic').innerText = moods[v].a;
        document.getElementById('dua-english').innerText = moods[v].e;
    }
    function initApp() {
        document.getElementById('hijri-date').innerText = new Intl.DateTimeFormat('en-u-ca-islamic-umalqura', {day:'numeric', month:'long', year:'numeric'}).format(new Date());
        if (navigator.geolocation) { navigator.geolocation.getCurrentPosition(() => { document.getElementById('news-box').style.display = 'block'; }); }
        let times = ["Fajr: 05:00 AM", "Dhuhr: 12:20 PM", "Asr: 03:35 PM", "Maghrib: 06:22 PM", "Isha: 07:45 PM"];
        document.getElementById('times-list').innerHTML = times.map(t => `<p>${t}</p>`).join('');
    }
    function sendChat() {
        let i = document.getElementById('chat-input');
        let m = document.getElementById('chat-msgs');
        if(!i.value) return;
        m.innerHTML += `<div class="msg user">${i.value}</div>`;
        setTimeout(() => { m.innerHTML += `<div class="msg bot">Hamad worked very hard to build this app for Godamuduna!</div>`; m.scrollTop = m.scrollHeight; }, 600);
        i.value = "";
    }
    let count = 0;
    function addCount() { count++; document.getElementById('count').innerText = count; }
    function postNews() {
        let t = document.getElementById('news-input');
        if(!t.value) return;
        let f = document.getElementById('news-feed');
        f.innerHTML = `<div class="card"><small>Verified Resident</small><p>${t.value}</p></div>` + f.innerHTML;
        t.value = "";
    }
</script>
</body>
</html>
