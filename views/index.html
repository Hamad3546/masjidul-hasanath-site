<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Masjidul Hasanath | Official Godamuduna</title>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Amiri&display=swap" rel="stylesheet">
    
    <style>
        :root { --p: #064e3b; --pl: #0d9488; --g: #d4af37; --bg: #f8fafc; --t: #0f172a; --c: #ffffff; --a: #f0fdf4; }
        [data-theme="dark"] { --p: #10b981; --pl: #34d399; --g: #fbbf24; --bg: #020617; --t: #f8fafc; --c: #1e293b; --a: #064e3b; }

        body { margin: 0; background: var(--bg); color: var(--t); font-family: 'Poppins', sans-serif; padding-bottom: 110px; transition: 0.3s; overflow-x: hidden; }
        
        /* GATEKEEPER */
        #gate { position: fixed; inset: 0; background: linear-gradient(135deg, var(--p), #065f46); z-index: 10000; display: flex; flex-direction: column; align-items: center; justify-content: center; color: white; text-align: center; padding: 30px; }
        .l-btn { padding: 12px 25px; border: 2px solid rgba(255,255,255,0.3); background: rgba(255,255,255,0.1); color: white; border-radius: 12px; cursor: pointer; font-weight: 600; margin: 5px; }

        /* LIVE NEWS TICKER */
        .news-ticker { background: var(--g); color: var(--p); padding: 8px 0; font-weight: 700; font-size: 0.85rem; overflow: hidden; white-space: nowrap; border-bottom: 2px solid var(--p); }
        .news-scroll { display: inline-block; animation: scroll 25s linear infinite; padding-left: 100%; }
        @keyframes scroll { 0% { transform: translateX(0); } 100% { transform: translateX(-100%); } }

        header { background: var(--p); padding: 20px; color: white; border-bottom: 4px solid var(--g); border-radius: 0 0 25px 25px; display: flex; justify-content: space-between; align-items: center; }
        
        /* QURAN TEXT DISPLAY (Auto-Scroll) */
        .quran-display { height: 180px; background: #fff9e6; border: 2px solid var(--g); border-radius: 15px; margin: 15px 0; overflow: hidden; padding: 20px; position: relative; }
        .arabic-text { font-family: 'Amiri', serif; font-size: 1.8rem; line-height: 2.5; color: #222; direction: rtl; position: absolute; width: 100%; left: 0; transition: top 0.5s linear; }

        /* VISUALIZER */
        .visualizer-box { height: 60px; display: flex; align-items: center; justify-content: center; gap: 4px; margin-bottom: 10px; }
        .bar { width: 6px; height: 10px; background: var(--g); border-radius: 3px; }
        .playing .bar { animation: pulse 0.8s ease-in-out infinite alternate; }
        @keyframes pulse { 0% { height: 10px; } 100% { height: 40px; } }

        /* NAV */
        nav { background: var(--c); display: flex; justify-content: space-around; padding: 15px 0; position: fixed; bottom: 0; width: 100%; z-index: 5000; box-shadow: 0 -5px 20px rgba(0,0,0,0.1); border-radius: 25px 25px 0 0; }
        nav button { background: none; border: none; color: #94a3b8; font-size: 0.65rem; cursor: pointer; display: flex; flex-direction: column; align-items: center; gap: 4px; width: 18%; }
        nav button.active { color: var(--p); font-weight: 700; }

        section { padding: 20px 15px; display: none; animation: fadeIn 0.4s ease; }
        section.active { display: block; }
        .card { background: var(--c); border-radius: 20px; padding: 22px; margin-bottom: 18px; border: 1px solid rgba(0,0,0,0.05); }

        /* COMPASS */
        .comp { width: 200px; height: 200px; margin: 20px auto; border: 8px solid var(--g); border-radius: 50%; position: relative; background: #fff; display: flex; align-items: center; justify-content: center; }
        #ndl { font-size: 4.5rem; color: #b91c1c; transition: transform 0.1s linear; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
        .btn-g { background: var(--g); color: var(--p); border: none; padding: 15px; border-radius: 12px; width: 100%; font-weight: 700; cursor: pointer; }
    </style>
</head>
<body>

<div id="gate">
    <i class="fas fa-mosque" style="font-size: 3rem; color: var(--g); margin-bottom: 10px;"></i>
    <h1>Masjidul Hasanath</h1>
    <p>Godamuduna Community Portal</p>
    <div style="margin: 20px 0;">
        <button class="l-btn" onclick="setL('en', this)">English</button>
        <button class="l-btn" onclick="setL('si', this)">à·ƒà·’à¶‚à·„à¶½</button>
    </div>
    <div id="g-box" style="display:none;"><div id="g_id_signin"></div></div>
</div>

<div id="main-content" style="display:none;">
    <div class="news-ticker">
        <div class="news-scroll">ğŸ“¢ Welcome: Quran with Auto-Scroll now LIVE â€¢ Ramadan 2026 starts Feb 19 â€¢ Built by Hamad Fazmil (16) â€¢ Support Godamuduna Mosque ğŸ“¢</div>
    </div>

    <header>
        <div><h3 style="margin:0; color:white;">Masjidul Hasanath</h3><small>Godamuduna Main</small></div>
        <i onclick="tMode()" class="fas fa-moon" style="cursor:pointer;"></i>
    </header>

    <section id="quran" class="active">
        <div class="card">
            <h3><i class="fas fa-play-circle"></i> Audio & Auto-Scroll Text</h3>
            
            <div id="v-box" class="visualizer-box">
                <div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div>
            </div>

            <div class="quran-display">
                <div id="qText" class="arabic-text" style="top: 10px;">
                    Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„Ù‘ÙÙ‡Ù Ø§Ù„Ø±Ù‘ÙØ­Ù’Ù…ÙÙ°Ù†Ù Ø§Ù„Ø±Ù‘ÙØ­ÙÙŠÙ…Ù <br>
                    Ø§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù Ù„ÙÙ„Ù‘ÙÙ‡Ù Ø±ÙØ¨Ù‘Ù Ø§Ù„Ù’Ø¹ÙØ§Ù„ÙÙ…ÙÙŠÙ†Ù <br>
                    Ø§Ù„Ø±Ù‘ÙØ­Ù’Ù…ÙÙ°Ù†Ù Ø§Ù„Ø±Ù‘ÙØ­ÙÙŠÙ…Ù <br>
                    Ù…ÙØ§Ù„ÙÙƒÙ ÙŠÙÙˆÙ’Ù…Ù Ø§Ù„Ø¯Ù‘ÙÙŠÙ†Ù <br>
                    Ø¥ÙÙŠÙ‘ÙØ§ÙƒÙ Ù†ÙØ¹Ù’Ø¨ÙØ¯Ù ÙˆÙØ¥ÙÙŠÙ‘ÙØ§ÙƒÙ Ù†ÙØ³Ù’ØªÙØ¹ÙÙŠÙ†Ù <br>
                    Ø§Ù‡Ù’Ø¯ÙÙ†ÙØ§ Ø§Ù„ØµÙ‘ÙØ±ÙØ§Ø·Ù Ø§Ù„Ù’Ù…ÙØ³Ù’ØªÙÙ‚ÙÙŠÙ…Ù <br>
                    ØµÙØ±ÙØ§Ø·Ù Ø§Ù„Ù‘ÙØ°ÙÙŠÙ†Ù Ø£ÙÙ†Ù’Ø¹ÙÙ…Ù’ØªÙ Ø¹ÙÙ„ÙÙŠÙ’Ù‡ÙÙ…Ù’ ØºÙÙŠÙ’Ø±Ù Ø§Ù„Ù’Ù…ÙØºÙ’Ø¶ÙÙˆØ¨Ù Ø¹ÙÙ„ÙÙŠÙ’Ù‡ÙÙ…Ù’ ÙˆÙÙ„ÙØ§ Ø§Ù„Ø¶Ù‘ÙØ§Ù„Ù‘ÙÙŠÙ†Ù
                </div>
            </div>

            <select id="sSelect" style="width:100%; padding:12px; border-radius:10px; margin-bottom:10px;" onchange="updateQ()">
                <option value="001">1. Al-Fatihah</option>
                <option value="036">36. Ya-Sin</option>
                <option value="067">67. Al-Mulk</option>
                <option value="112">112. Al-Ikhlas</option>
            </select>

            <audio id="qAudio" style="width:100%;" controls onplay="playS()" onpause="stopS()">
                <source src="https://server8.mp3quran.net/afs/001.mp3" type="audio/mpeg">
            </audio>
        </div>
    </section>

    <section id="qibla">
        <div class="card" style="text-align:center;">
            <h3>Qibla Compass</h3>
            <div class="comp"><i id="ndl" class="fas fa-location-arrow"></i></div>
            <h2 id="deg">0Â°</h2>
            <button class="btn-g" onclick="initC()">ACTIVATE SENSORS</button>
        </div>
    </section>

    <section id="me">
        <div class="card" style="text-align:center;">
            <div style="width:80px; height:80px; background:var(--p); border-radius:50%; margin:0 auto 10px; display:flex; align-items:center; justify-content:center; color:white; font-size:2rem;"><i class="fas fa-code"></i></div>
            <h2>Hamad Fazmil</h2>
            <span style="background:var(--g); color:var(--p); padding:4px 12px; border-radius:20px; font-weight:700; font-size:0.7rem;">FOUNDER & DEVELOPER | AGE 16</span>
            
            <p style="font-size:0.85rem; text-align:left; line-height:1.6; margin-top:15px;">
                I built this portal to be the digital heartbeat of <b>Godamuduna</b>. I combined Google Security, Mobile Motion Sensors for the Qibla, and a custom-coded <b>Text Synchronization Engine</b> for the Quran. My goal is to use my coding journey to help our village stay connected to the Mosque.
            </p>
            <a href="mailto:hamadfazmil455@gmail.com" class="btn-g" style="display:block; text-decoration:none;">CONTACT ME</a>
        </div>
    </section>

    <nav>
        <button onclick="tab('quran', this)" class="active"><i class="fas fa-book-quran"></i><span>Quran</span></button>
        <button onclick="tab('qibla', this)"><i class="fas fa-compass"></i><span>Qibla</span></button>
        <button onclick="tab('me', this)"><i class="fas fa-user-circle"></i><span>Hamad</span></button>
    </nav>
</div>

<script>
    let scrollInterval;

    function setL(l, b) {
        document.getElementById('g-box').style.display = 'block';
    }

    window.onload = function() {
        google.accounts.id.initialize({
            client_id: "318225024149-0hjour8gpcp0in6l9ksb415ba6aqvn03.apps.googleusercontent.com",
            callback: (res) => { if(res.credential) { 
                document.getElementById('gate').style.display='none'; 
                document.getElementById('main-content').style.display='block'; 
            }}
        });
        google.accounts.id.renderButton(document.getElementById("g_id_signin"), {theme:"outline", size:"large"});
    }

    function updateQ() {
        const s = document.getElementById('sSelect');
        const a = document.getElementById('qAudio');
        a.src = `https://server8.mp3quran.net/afs/${s.value}.mp3`;
        a.play();
    }

    function playS() {
        document.getElementById('v-box').classList.add('playing');
        const text = document.getElementById('qText');
        let pos = 10;
        scrollInterval = setInterval(() => {
            pos -= 0.5;
            text.style.top = pos + "px";
            if(pos < -400) pos = 180; // Reset scroll
        }, 100);
    }

    function stopS() {
        document.getElementById('v-box').classList.remove('playing');
        clearInterval(scrollInterval);
    }

    function initC() {
        if (typeof DeviceOrientationEvent.requestPermission === 'function') {
            DeviceOrientationEvent.requestPermission().then(s => { if(s=='granted') window.addEventListener('deviceorientation', rot); });
        } else { window.addEventListener('deviceorientation', rot); }
    }

    function rot(e) {
        let h = e.webkitCompassHeading || (360 - e.alpha);
        if(h) {
            document.getElementById('ndl').style.transform = `rotate(${- (h - 298.5)}deg)`;
            document.getElementById('deg').innerText = Math.round(h) + "Â°";
        }
    }

    function tab(id, b) {
        document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        document.querySelectorAll('nav button').forEach(btn => btn.classList.remove('active'));
        b.classList.add('active');
    }

    function tMode() {
        let d = document.documentElement;
        d.setAttribute('data-theme', d.getAttribute('data-theme') === 'dark' ? 'light' : 'dark');
    }
</script>
</body>
</html>
