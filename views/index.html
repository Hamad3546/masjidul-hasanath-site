<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="google-adsense-account" content="ca-pub-1519642066428508">

    <title>Masjidul Hasanath | Official Portal</title>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Amiri&display=swap" rel="stylesheet">
    <style>
        :root { --p: #064e3b; --g: #d4af37; --bg: #f1f5f9; --t: #0f172a; --c: #ffffff; --a: #f0fdf4; --grad: linear-gradient(135deg, #064e3b 0%, #042f24 100%); }
        [data-theme="dark"] { --p: #10b981; --g: #fbbf24; --bg: #020617; --t: #f8fafc; --c: #1e293b; --a: #064e3b; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }
        body { margin: 0; background: var(--bg); color: var(--t); font-family: 'Poppins', sans-serif; padding-bottom: 110px; overflow-x: hidden; }

        /* THE ENTRANCE GATE */
        #gate { position: fixed; inset: 0; background: var(--grad); z-index: 10000; display: flex; flex-direction: column; align-items: center; justify-content: center; color: white; text-align: center; }
        .gate-card { background: rgba(255,255,255,0.08); padding: 40px; border-radius: 35px; border: 1px solid rgba(255,255,255,0.15); width: 90%; max-width: 420px; backdrop-filter: blur(25px); box-shadow: 0 25px 50px -12px rgba(0,0,0,0.5); }
        .l-btn { width: 100%; padding: 18px; margin: 12px 0; border: none; border-radius: 15px; font-weight: 700; cursor: pointer; background: var(--g); color: var(--p); font-size: 1.1rem; }

        /* NEWS TICKER */
        .ticker { background: var(--g); color: var(--p); padding: 12px 0; font-weight: 800; font-size: 0.85rem; overflow: hidden; white-space: nowrap; border-bottom: 3px solid var(--p); position: sticky; top: 0; z-index: 1000; }
        .ticker-m { display: inline-block; animation: scroll 40s linear infinite; padding-left: 100%; }
        @keyframes scroll { 0% { transform: translateX(0); } 100% { transform: translateX(-100%); } }

        header { background: var(--grad); padding: 30px 20px; color: white; border-radius: 0 0 40px 40px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        .loc-badge { font-size: 0.7rem; background: rgba(255,255,255,0.2); padding: 4px 12px; border-radius: 20px; font-weight: 600; text-transform: uppercase; }

        /* CONTENT SYSTEM */
        section { padding: 25px 20px; display: none; animation: cubic-bezier(0.4, 0, 0.2, 1) 0.6s slideIn; }
        section.active { display: block; }
        @keyframes slideIn { from { opacity: 0; transform: translateY(40px); } to { opacity: 1; transform: translateY(0); } }
        .card { background: var(--c); border-radius: 30px; padding: 25px; margin-bottom: 25px; border: 1px solid rgba(0,0,0,0.03); box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1); }

        /* TIMETABLE LIST */
        .time-row { display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid rgba(0,0,0,0.05); font-size: 0.85rem; }
        .time-row:last-child { border: none; }
        .time-label { color: #64748b; font-weight: 500; }
        .time-val { color: var(--p); font-weight: 700; }

        /* QURAN READING SUITE */
        .read-box { height: 320px; background: #fffdf7; border: 3px solid var(--g); border-radius: 25px; margin: 20px 0; overflow-y: auto; padding: 25px; position: relative; scroll-behavior: smooth; }
        .arabic-text { font-family: 'Amiri', serif; font-size: 2.3rem; line-height: 3.2; color: #1a1a1a; direction: rtl; text-align: center; }
        .visualizer { height: 5px; width: 0%; background: var(--g); margin-bottom: 15px; border-radius: 10px; transition: 0.4s; }

        /* QIBLA */
        .comp-ui { width: 220px; height: 220px; border: 12px solid var(--g); border-radius: 50%; margin: 30px auto; position: relative; display: flex; align-items: center; justify-content: center; background: white; box-shadow: inset 0 0 30px rgba(0,0,0,0.05); }
        #ndl { font-size: 5.5rem; color: #be123c; transition: transform 0.1s; filter: drop-shadow(0 4px 6px rgba(0,0,0,0.2)); }

        /* NAVIGATION */
        nav { background: var(--c); display: flex; justify-content: space-around; padding: 20px 0; position: fixed; bottom: 0; width: 100%; box-shadow: 0 -15px 35px rgba(0,0,0,0.1); border-radius: 40px 40px 0 0; z-index: 5000; }
        nav button { background: none; border: none; color: #94a3b8; font-size: 0.7rem; cursor: pointer; display: flex; flex-direction: column; align-items: center; gap: 10px; }
        nav button.active { color: var(--p); font-weight: 800; transform: translateY(-8px); }

        /* CHAT & BUTTONS */
        .chat-ui { height: 200px; overflow-y: auto; background: var(--bg); border-radius: 20px; padding: 15px; margin-bottom: 15px; font-size: 0.85rem; }
        .btn-action { background: var(--g); color: var(--p); border: none; padding: 18px; border-radius: 18px; width: 100%; font-weight: 800; cursor: pointer; }
        
        .tasbih-count { font-size: 5rem; font-weight: 800; color: var(--p); margin: 20px 0; text-shadow: 2px 2px 0px rgba(0,0,0,0.1); }

        /* TABLE STYLING */
        table { width: 100%; border-collapse: collapse; margin-top: 10px; font-size: 0.8rem; }
        th { background: var(--a); color: var(--p); padding: 10px 5px; text-align: center; }
        td { padding: 10px 5px; text-align: center; border-bottom: 1px solid #eee; }
    </style>
</head>
<body>

<div id="gate">
    <div class="gate-card">
        <i class="fas fa-kaaba" style="font-size: 4rem; color: var(--g); margin-bottom: 25px;"></i>
        <h2 style="margin:0; letter-spacing: 1px;">Masjidul Hasanath</h2>
        <p style="opacity: 0.8; font-weight: 300;">Digital Portal Entrance</p>
        <button class="l-btn" onclick="openSecurity()">English</button>
        <button class="l-btn" onclick="openSecurity()">à·ƒà·’à¶‚à·„à¶½</button>
        <div id="g_id_signin" style="display:none; justify-content:center; margin-top:20px; transform: scale(1.1);"></div>
        <p style="font-size: 0.75rem; margin-top: 40px; opacity: 0.6; font-weight: 600;">BUILD BY HAMAD FAZMIL (16)</p>
    </div>
</div>

<div id="app" style="display:none;">
    <div class="ticker"><div class="ticker-m">ðŸ“¢ NOTICE: RAMADAN 2026 STARTS FEB 19 â€¢ 30 JUZ QURAN PRACTICE MODE NOW LIVE â€¢ QIBLA SYNC CALIBRATED FOR GODAMUDUNA (298.5Â°) â€¢ DEVELOPED BY HAMAD FAZMIL ðŸ“¢</div></div>
    
    <header>
        <div><h3 style="margin:0; font-size: 1.4rem;">Masjidul Hasanath</h3><span class="loc-badge"><i class="fas fa-location-dot"></i> Godamuduna</span></div>
        <i onclick="tMode()" class="fas fa-moon" style="font-size: 1.5rem; cursor: pointer;"></i>
    </header>

    <section id="home" class="active">
        <div class="card" style="background: var(--grad); color: white; text-align: center; border: none;">
            <p style="margin:0; font-size: 0.85rem; opacity: 0.9;">Ramadan 2026 Countdown</p>
            <h1 id="timer" style="margin: 15px 0; font-size: 2.8rem; letter-spacing: 2px;">00d 00h 00m</h1>
        </div>

        <div class="card">
            <h3><i class="fas fa-clock" style="color:var(--g)"></i> Daily Prayer Times</h3>
            <div style="overflow-x:auto;">
                <table>
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Sahar</th>
                            <th>Fajr</th>
                            <th>Luhr</th>
                            <th>Asr</th>
                            <th>Magrib</th>
                            <th>Isha</th>
                        </tr>
                    </thead>
                    <tbody id="prayerRows">
                        </tbody>
                </table>
            </div>
        </div>

        <div class="card">
            <h3><i class="fas fa-users" style="color:var(--g)"></i> Community Feed</h3>
            <div id="locBanner" style="background: #fff3cd; padding: 10px; border-radius: 10px; font-size: 0.8rem; margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
                <i class="fas fa-location-crosshairs"></i>
                <span id="locText">Checking location to enable posting...</span>
            </div>
            
            <div id="postBox" style="display:none;">
                <textarea id="feedInput" style="width:100%; height:80px; padding:12px; border-radius:12px; border:1px solid #ddd; font-family:inherit; margin-bottom:10px;" placeholder="What's happening in Godamuduna?"></textarea>
                <button class="btn-action" onclick="addPost()">Post Update</button>
            </div>

            <div id="feedList" style="margin-top: 20px;">
                <div style="text-align:center; color:#94a3b8; font-size:0.85rem; padding:20px;">No updates yet.</div>
            </div>
        </div>
    </section>

    <section id="quran">
        <div class="card">
            <h3><i class="fas fa-book-quran"></i> 30 Juz Reading Practice</h3>
            <div class="visualizer" id="vBar"></div>
            <div class="read-box" id="readWin">
                <div id="qText" class="arabic-text">Select a Surah to begin practicing...</div>
            </div>
            <select id="sSel" style="width:100%; padding:18px; border-radius:15px; margin-bottom:15px; font-weight:700; border: 2px solid #eee;" onchange="loadQuran()"></select>
            <audio id="qAudio" style="width:100%;" controls onplay="playScroll()" onpause="stopScroll()"></audio>
        </div>
        <div class="card">
            <h3><i class="fas fa-heart"></i> Essential Duas</h3>
            <select id="duaSel" style="width:100%; padding:15px; border-radius:15px;" onchange="showDua()">
                <option value="">Select a Prayer...</option>
            </select>
            <div id="duaDisp" style="margin-top:20px; text-align:center;"></div>
        </div>
    </section>

    <section id="tools">
        <div class="card" style="text-align:center;">
            <h3><i class="fas fa-fingerprint"></i> Digital Tasbih</h3>
            <div id="tasbihVal" class="tasbih-count">0</div>
            <button class="btn-action" onclick="countTasbih()" style="margin-bottom:15px; font-size:1.2rem;">TAP TO COUNT</button>
            <br>
            <button onclick="resetTasbih()" style="background:none; border:none; color:#64748b; text-decoration:underline; font-size:0.85rem; cursor:pointer;">Reset Counter</button>
        </div>

        <div class="card" style="text-align:center;">
            <h3>Precision Qibla</h3>
            <p style="font-size:0.8rem; color:#94a3b8;">Godamuduna Offset: 298.5Â°</p>
            <div class="comp-ui"><i id="ndl" class="fas fa-location-arrow"></i></div>
            <button class="btn-action" onclick="syncSensors()">ACTIVATE SENSOR</button>
        </div>

        <div class="card">
            <h3>Zakat Calculator</h3>
            <input type="number" id="zVal" style="width:100%; padding:15px; margin-bottom:15px; border-radius:12px; border:1px solid #ddd;" placeholder="Total Assets (LKR)">
            <button class="btn-action" onclick="calcZ()">Calculate 2.5%</button>
            <h4 id="zRes" style="text-align:center; color:var(--p); margin-top:15px;"></h4>
        </div>
    </section>

    <section id="me">
        <div class="card" style="text-align:center; border-top: 6px solid var(--g);">
            <div style="width:110px; height:110px; background:var(--grad); border-radius:50%; margin:0 auto 20px; display:flex; align-items:center; justify-content:center; color:white; font-size:3rem; border:5px solid white; box-shadow: 0 15px 30px rgba(0,0,0,0.1);"><i class="fas fa-user-gear"></i></div>
            <h2 style="margin:0;">Hamad Fazmil</h2>
            <div style="margin:12px 0;"><span style="background:var(--a); color:var(--p); padding:6px 18px; border-radius:25px; font-weight:800; font-size:0.8rem;">CHIEF ARCHITECT | AGE 16</span></div>
            
            <p style="text-align:left; font-size:0.95rem; line-height:2.0; color: #475569; padding: 10px;">
                <b>Assalamu Alaikum.</b> This platform is not just a website; it is a labor of love and a promise to the community of Godamuduna. 
                <br><br>
                At just 16 years old, I spent countless sleepless nights designing and engineering this system from the ground up. I faced complex challenges, but my vision was clear: <b>Masjidul Hasanath deserves world-class digital infrastructure.</b>
                <br><br>
                I poured my heart, soul, and determination into every single feature you see hereâ€”from the precision reading engine to the sensor algorithmsâ€”to prove that our community can lead in innovation. This is my gift to my neighbors, my family, and the Ummah.
            </p>
            <a href="mailto:hamadfazmil455@gmail.com" class="btn-action" style="display:block; text-decoration:none; margin-top:20px;">CONTACT THE DEVELOPER</a>
        </div>
    </section>

    <nav>
        <button onclick="tab('home', this)" class="active"><i class="fas fa-mosque"></i><span>Home</span></button>
        <button onclick="tab('quran', this)"><i class="fas fa-book-open"></i><span>Quran</span></button>
        <button onclick="tab('tools', this)"><i class="fas fa-microchip"></i><span>Tools</span></button>
        <button onclick="tab('me', this)"><i class="fas fa-id-badge"></i><span>Hamad</span></button>
    </nav>
</div>

<script>
    let scrollJob, scrollPos = 0;
    let tCount = 0;

    const surahNames = ["Al-Fatiha","Al-Baqarah","Al-Imran","An-Nisa","Al-Ma'idah","Al-An'am","Al-A'raf","Al-Anfal","At-Tawbah","Yunus","Hud","Yusuf","Ar-Ra'd","Ibrahim","Al-Hijr","An-Nahl","Al-Isra","Al-Kahf","Maryam","Ta-Ha","Al-Anbiya","Al-Hajj","Al-Mu'minun","An-Nur","Al-Furqan","Ash-Shu'ara","An-Naml","Al-Qasas","Al-Ankabut","Ar-Rum","Luqman","As-Sajdah","Al-Ahzab","Saba","Fatir","Ya-Sin","As-Saffat","Sad","Az-Zumar","Ghafir","Fussilat","Ash-Shura","Az-Zukhruf","Ad-Dukhan","Al-Jathiyah","Al-Ahqaf","Muhammad","Al-Fath","Al-Hujurat","Qaf","Adh-Dhariyat","At-Tur","An-Najm","Al-Qamar","Ar-Rahman","Al-Waqi'a","Al-Hadid","Al-Mujadila","Al-Hashr","Al-Mumtahanah","As-Saff","Al-Jumu'ah","Al-Munafiqun","At-Taghabun","At-Talaq","At-Tahrim","Al-Mulk","Al-Qalam","Al-Haqqah","Al-Ma'arij","Nuh","Al-Jinn","Al-Muzzammil","Al-Muddathir","Al-Qiyamah","Al-Insan","Al-Mursalat","An-Naba","An-Nazi'at","Abasa","At-Takwir","Al-Infitar","Al-Mutaffifin","Al-Inshiqaq","Al-Buruj","At-Tariq","Al-A'la","Al-Ghashiyah","Al-Fajr","Al-Balad","Ash-Shams","Al-Lail","Ad-Duha","Ash-Sharh","At-Tin","Al-Alaq","Al-Qadr","Al-Bayyinah","Az-Zalzalah","Al-Adiyat","Al-Qari'a","At-Takathur","Al-Asr","Al-Humazah","Al-Fil","Quraish","Al-Ma'un","Al-Kawthar","Al-Kafirun","An-Nasr","Al-Masad","Al-Ikhlas","Al-Falaq","An-Nas"];
    
    const duaData = [
        {t: "Upon Waking Up", ar: "Ø§Ù„Ù’Ø­ÙŽÙ…Ù’Ø¯Ù Ù„ÙÙ„ÙŽÙ‘Ù‡Ù Ø§Ù„ÙŽÙ‘Ø°ÙÙŠ Ø£ÙŽØ­Ù’ÙŠÙŽØ§Ù†ÙŽØ§ Ø¨ÙŽØ¹Ù’Ø¯ÙŽ Ù…ÙŽØ§ Ø£ÙŽÙ…ÙŽØ§ØªÙŽÙ†ÙŽØ§ ÙˆÙŽØ¥ÙÙ„ÙŽÙŠÙ’Ù‡Ù Ø§Ù„Ù†ÙÙ‘Ø´ÙÙˆØ±Ù", en: "All praise is due to Allah who brought us to life after having caused us to die and unto Him is the resurrection."},
        {t: "Protection from Anxiety", ar: "Ø§Ù„Ù„ÙŽÙ‘Ù‡ÙÙ…ÙŽÙ‘ Ø¥ÙÙ†ÙÙ‘ÙŠ Ø£ÙŽØ¹ÙÙˆØ°Ù Ø¨ÙÙƒÙŽ Ù…ÙÙ†ÙŽ Ø§Ù„Ù’Ù‡ÙŽÙ…ÙÙ‘ ÙˆÙŽØ§Ù„Ù’Ø­ÙŽØ²ÙŽÙ†Ù", en: "O Allah, I seek refuge in You from anxiety and sorrow."}
        // ... (Keep existing duaData)
    ];

    const prayerData = [
        { date: "19-22 Feb", sahar: "5:04", fajr: "5:06", luhr: "12:23", asr: "3:43", magrib: "6:20", isha: "7:30" },
        { date: "23-25 Feb", sahar: "5:03", fajr: "5:05", luhr: "12:22", asr: "3:42", magrib: "6:21", isha: "7:30" },
        { date: "26-28 Feb", sahar: "5:03", fajr: "5:05", luhr: "12:21", asr: "3:41", magrib: "6:21", isha: "7:30" },
        { date: "01-04 Mar", sahar: "5:01", fajr: "5:03", luhr: "12:21", asr: "3:39", magrib: "6:21", isha: "7:29" },
        { date: "05-08 Mar", sahar: "4:59", fajr: "5:01", luhr: "12:20", asr: "3:35", magrib: "6:20", isha: "7:29" }
    ];

    function openSecurity() {
        document.getElementById('gate').style.display='none';
        document.getElementById('app').style.display='block';
        setup();
        checkLocation();
    }

    function setup() {
        const s = document.getElementById('sSel');
        surahNames.forEach((name, index) => {
            let o = document.createElement('option');
            o.value = index + 1;
            o.text = (index + 1) + ". " + name;
            s.appendChild(o);
        });

        const pr = document.getElementById('prayerRows');
        prayerData.forEach(p => {
            pr.innerHTML += `<tr><td>${p.date}</td><td>${p.sahar}</td><td>${p.fajr}</td><td>${p.luhr}</td><td>${p.asr}</td><td>${p.magrib}</td><td>${p.isha}</td></tr>`;
        });

        setInterval(() => {
            let g = new Date("Feb 19, 2026 00:00:00") - new Date();
            if(g<0) { document.getElementById('timer').innerText = "Ramadan Mubarak!"; return; }
            document.getElementById('timer').innerText = Math.floor(g/86400000)+"d "+Math.floor((g%86400000)/3600000)+"h "+Math.floor((g%3600000)/60000)+"m";
        }, 1000);
    }

    // LOCATION & COMMUNITY POST LOGIC
    function checkLocation() {
        if ("geolocation" in navigator) {
            navigator.geolocation.getCurrentPosition(pos => {
                // Godamuduna Coordinates approx: 6.74, 80.53
                const lat = pos.coords.latitude;
                const lon = pos.coords.longitude;
                const dist = Math.sqrt(Math.pow(lat - 6.74, 2) + Math.pow(lon - 80.53, 2));
                
                if (dist < 0.1) { // Within village radius
                    document.getElementById('locBanner').style.background = "#d1e7dd";
                    document.getElementById('locText').innerText = "Location Verified: Godamuduna";
                    document.getElementById('postBox').style.display = "block";
                } else {
                    document.getElementById('locText').innerText = "Posting is only for Godamuduna residents.";
                }
            }, () => {
                document.getElementById('locText').innerText = "Location access denied. Cannot post.";
            });
        }
    }

    function addPost() {
        const input = document.getElementById('feedInput');
        if(!input.value) return;
        const feed = document.getElementById('feedList');
        const time = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
        
        const html = `
            <div style="background:var(--c); border:1px solid #eee; padding:15px; border-radius:15px; margin-bottom:12px; box-shadow:0 4px 6px rgba(0,0,0,0.02);">
                <div style="display:flex; justify-content:space-between; margin-bottom:8px;">
                    <span style="font-weight:700; color:var(--p); font-size:0.8rem;">Village Resident</span>
                    <span style="color:#94a3b8; font-size:0.7rem;">${time}</span>
                </div>
                <div style="font-size:0.9rem; line-height:1.5;">${input.value}</div>
            </div>
        `;
        if(feed.innerText === "No updates yet.") feed.innerHTML = "";
        feed.insertAdjacentHTML('afterbegin', html);
        input.value = "";
    }

    // --- (Keep existing Quran, Tasbih, and Navigation JS) ---
    function countTasbih() { tCount++; document.getElementById('tasbihVal').innerText = tCount; if(navigator.vibrate) navigator.vibrate(40); }
    function resetTasbih() { if(confirm("Reset?")) { tCount = 0; document.getElementById('tasbihVal').innerText = 0; } }
    
    async function loadQuran() {
        const n = document.getElementById('sSel').value;
        const txt = document.getElementById('qText');
        txt.innerText = "Loading...";
        try {
            const res = await fetch(`https://api.alquran.cloud/v1/surah/${n}`);
            const data = await res.json();
            txt.innerHTML = data.data.ayahs.map(a => a.text + ` <span style="color:var(--g)">(${a.numberInSurah})</span> `).join(" ");
            document.getElementById('qAudio').src = `https://server8.mp3quran.net/afs/${n.padStart(3, '0')}.mp3`;
        } catch(e) { txt.innerText = "Error."; }
    }

    function playScroll() { scrollJob = setInterval(() => { scrollPos += 0.6; document.getElementById('readWin').scrollTop = scrollPos; }, 100); }
    function stopScroll() { clearInterval(scrollJob); }

    function tab(id, b) {
        document.querySelectorAll('section').forEach(s=>s.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        document.querySelectorAll('nav button').forEach(n=>n.classList.remove('active'));
        b.classList.add('active');
    }

    function tMode() {
        let d = document.documentElement;
        d.setAttribute('data-theme', d.getAttribute('data-theme')==='dark'?'light':'dark');
    }
</script>
</body>
</html>
